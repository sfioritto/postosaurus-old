{% extends "postosaurus/base.html" %}
{% load tags %}

{% block css %}
<link type="text/css" rel="stylesheet" href="{{ MEDIA_URL }}css/list-tabs.css">
<link type="text/css" rel="stylesheet" href="{{MEDIA_URL}}css/files.css" />
{% endblock %}

{% block nav %}
{% include 'postosaurus/list-nav.html' %}
{% endblock %}

{% block content %}
<div id="breadcrumb">
  <a href="{{ org.url }}">{{ org.name }}</a> >
  <a href="{% org_url webapp.postosaurus.views.list.members org.subdomain, mlist.name %}">
  {{ mlist.name }}
  </a> >
  <a href="{% org_url webapp.postosaurus.views.list.files org.subdomain, mlist.name %}">Files</a>
</div>

{% if files %}
<p class="hint">
Tip: Email attachments sent to {{ mlist.email }} will be uploaded here.
</p>

<ul id="filelist">
  {% for file in files %}
  <li>
  <p>
  <a href="{{file.recent_url_path}}">{{file.name}}</a>
  <span class="fileinfo">by {{ file.user.email }} on {{ file.created_on|date }}</span>
  <a href="{% org_url webapp.postosaurus.views.list.file_versions org.subdomain, mlist.name, file.name %}">(older versions)</a>
  </p>
  </li>
  {% endfor %}
</ul>

{% else %}
<div id="nofiles">
  <h3>Add a file to your project</h3>
  <p id="scannable">
  Attach a file to an email and send it to {{ mlist.email }}.
  </p>
  <p id="detail">
  As you and your group members send emails back and forth, Postosaurus
  will collect any attachements you send and keep them here where you can
  find and download them later. Or you can use the upload button below.
  </p>
</div>
{% endif %}

{% if org.active %}
<form
id="uploadfile"
enctype="multipart/form-data"
method="post"
action="{% org_url webapp.postosaurus.views.list.upload_file org.subdomain, mlist.name %}">
{{ form.file }}
<input type="hidden" name="next"
value="{% org_url webapp.postosaurus.views.list.files org.subdomain, mlist.name %}" />
<input type="submit" value="Upload" id="uploadbutton" />
</form>
{% endif %}

{% endblock %}
